---
layout: post
title: 配置文件
categories: 架构设计
description: 配置文件
keywords: 配置, 架构
---

### 程序配置文件，设计一般遵从：

- 做到自动配置，自动部署，所以有的系统里会有一个单独的配置服务存在，每个其它的服务的配置信息从配置中心服务获取
  - k8s配置采用Configmap管理
- 通过管理后台，将配置文件下发给配置中心服务器，其余服务从配置中心获取变更信息
  - 类似于dubbo的注册中心，保证配置文件在分布式服务下的一致性
  - 配置中心服务器，需要配置动态配置分发，可以采用zookeeper，参考：https://segmentfault.com/a/1190000023287758
- 配置文件格式：
  - **lua 配置**：可以添加方法去检查配置是否合法
  - ini 配置
  - xml 配置
  - json 配置

------

### ini配置

1. 读取文件内容，然后依照文件内容，把这些字段和值组成key-value的形式保存在某个数据结构中
2. 通过key（区段+字段）就能找到value（值）
3. 保存的数据结构：字典
4. 开源配置库： https://github.com/ndevilla/iniparser

